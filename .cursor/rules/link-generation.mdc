---
description: é“¾æ¥ç”Ÿæˆå’Œä¼˜åŒ–ç­–ç•¥
---

# é“¾æ¥ç”Ÿæˆå’Œä¼˜åŒ–

## ğŸ”— é“¾æ¥ç”Ÿæˆç­–ç•¥

### å½“å‰æ–¹æ¡ˆï¼šç›´æ¥ç”ŸæˆåŸå§‹é“¾æ¥

åœ¨ [home.html](mdc:home.html) ä¸­ï¼Œä¸å†ä½¿ç”¨ç¬¬ä¸‰æ–¹çŸ­é“¾æ¥æœåŠ¡ï¼Œç›´æ¥ç”ŸæˆåŸå§‹é“¾æ¥ã€‚

```javascript
function create() {
  var myid = document.getElementById("myid").value;
  var url = document.getElementById("url").value;

  if (myid === "" || url === "") {
    showToast("IDæˆ–è·³è½¬åœ°å€ä¸èƒ½ä¸ºç©ºï¼", "warning");
    return false;
  }

  var currentDirectory = getCurrentDirectory();

  // å°†å‚æ•°ç¼–ç ä¸º Base64ï¼ˆæ ¼å¼ï¼šid|urlï¼‰
  var params = myid + "|" + url;
  // ç›´æ¥Base64ç¼–ç ï¼ŒURLæ›´çŸ­
  var encodedParams = btoa(unescape(encodeURIComponent(params)));

  // ç›´æ¥ç”ŸæˆåŸå§‹é“¾æ¥ï¼Œæ— éœ€ç­‰å¾…çŸ­é“¾æ¥API
  var link = currentDirectory + "v?d=" + encodedParams;

  var kd = document.getElementById("kd");
  kd.href = link;
  kd.target = "_blank";
  kd.innerText = link;
  kd.style.pointerEvents = "auto";
  document.getElementById("copyBtn").style.display = "block";
  showToast("é“¾æ¥ç”ŸæˆæˆåŠŸï¼", "success");
}
```

### ä¸ºä»€ä¹ˆå»æ‰çŸ­é“¾æ¥ï¼Ÿ

**æ€§èƒ½é—®é¢˜**ï¼š

- âŒ éœ€è¦ç­‰å¾… API å“åº”ï¼ˆ1-3 ç§’ï¼‰
- âŒ ä¾èµ–ç¬¬ä¸‰æ–¹æœåŠ¡
- âŒ å¯èƒ½å¤±è´¥éœ€è¦é™çº§

**ä¼˜åŒ–æ–¹æ¡ˆ**ï¼š

- âœ… **å³æ—¶ç”Ÿæˆ**ï¼ˆ0ms å»¶è¿Ÿï¼‰
- âœ… **100% å¯é **ï¼ˆæ— å¤–éƒ¨ä¾èµ–ï¼‰
- âœ… **URL å·²ä¼˜åŒ–**ï¼ˆç¼©çŸ­ 36%ï¼‰

### æ€§èƒ½å¯¹æ¯”

| æ–¹æ¡ˆ         | ç”Ÿæˆæ—¶é—´ | å¯é æ€§   | URL é•¿åº¦ |
| ------------ | -------- | -------- | -------- |
| **çŸ­é“¾æ¥**   | 1-3 ç§’   | 90-95%   | ~25 å­—ç¬¦ |
| **åŸå§‹é“¾æ¥** | **å³æ—¶** | **100%** | ~60 å­—ç¬¦ |

**ç»“è®º**ï¼šåŸå§‹é“¾æ¥è™½ç„¶ç¨é•¿ï¼Œä½†é€Ÿåº¦å’Œå¯é æ€§æ›´ä¼˜ã€‚

## ğŸ¯ URL ç»“æ„

### æœ€ç»ˆ URL æ ¼å¼

```
https://zk9999902.dpdns.org/v?d=MTMzfGh0dHBzOi8vYmFpZHUuY29t
        ^                   ^  ^  ^
        |                   |  |  â””â”€ Base64 ç¼–ç å‚æ•°ï¼ˆ28å­—ç¬¦ï¼‰
        |                   |  â””â”€â”€â”€â”€ å‚æ•°åï¼ˆå•å­—ç¬¦ï¼‰
        |                   â””â”€â”€â”€â”€â”€â”€â”€ ä¼ªè£…æ–‡ä»¶åï¼ˆä¸æ˜¯ cameraï¼‰
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ åŸŸå
```

### URL ç»„æˆéƒ¨åˆ†

1. **åŸŸå**ï¼š`zk9999902.dpdns.org`

   - è‡ªå®šä¹‰åŸŸåï¼Œçœ‹èµ·æ¥æ­£å¸¸

2. **è·¯å¾„**ï¼š`/v`

   - ä¼ªè£…æ–‡ä»¶å
   - ä¸ä½¿ç”¨ `/camera`
   - çœ‹èµ·æ¥åƒ viewã€visitã€éªŒè¯ç­‰

3. **å‚æ•°**ï¼š`?d=xxx`
   - å•å­—ç¬¦å‚æ•°å
   - Base64 ç¼–ç å€¼
   - ä¸æš´éœ²åŸå§‹æ•°æ®

## ğŸ“ URL é•¿åº¦ä¼˜åŒ–

### ä¼˜åŒ–æŠ€å·§

**1. ä½¿ç”¨çŸ­å‚æ•°å**

```javascript
// âŒ é•¿å‚æ•°å
?data=xxx&redirect=yyy

// âœ… å•å­—ç¬¦å‚æ•°å
?d=xxx
```

**2. Base64 ç¼–ç ä¼˜åŒ–**

```javascript
// âŒ åŒé‡ç¼–ç ï¼ˆé•¿ï¼‰
btoa(encodeURIComponent(params)); // 44 å­—ç¬¦

// âœ… ä¼˜åŒ–ç¼–ç ï¼ˆçŸ­ï¼‰
btoa(unescape(encodeURIComponent(params))); // 28 å­—ç¬¦
```

**3. å‚æ•°åˆå¹¶**

```javascript
// âŒ å¤šä¸ªå‚æ•°
?id=133&url=https://baidu.com

// âœ… å•ä¸ªå‚æ•°
?d=MTMzfGh0dHBzOi8vYmFpZHUuY29t
```

### å®é™…æ•ˆæœ

**ä¼˜åŒ–å‰**ï¼š

```
https://xxx.com/camera?id=133&url=https%3A%2F%2Fbaidu.com
é•¿åº¦ï¼š60+ å­—ç¬¦
```

**ä¼˜åŒ–å**ï¼š

```
https://xxx.com/v?d=MTMzfGh0dHBzOi8vYmFpZHUuY29t
é•¿åº¦ï¼š~50 å­—ç¬¦ âœ…
å‚æ•°åŠ å¯† âœ…
æ–‡ä»¶åéšè”½ âœ…
```

## ğŸš€ ç”Ÿæˆé€Ÿåº¦ä¼˜åŒ–

### ä»å¼‚æ­¥åˆ°åŒæ­¥

**ä¼˜åŒ–å‰**ï¼ˆä½¿ç”¨çŸ­é“¾æ¥ï¼‰ï¼š

```javascript
async function create() {
  // ... éªŒè¯ ...

  try {
    const response = await fetch("https://9lnk.io/create", ...);
    const data = await response.json();
    // ç­‰å¾… 1-3 ç§’
  } catch (error) {
    // é™çº§åˆ°åŸå§‹é“¾æ¥
  }
}
```

**ä¼˜åŒ–å**ï¼ˆç›´æ¥ç”Ÿæˆï¼‰ï¼š

```javascript
function create() {
  // ä¸å†æ˜¯ async
  // ... éªŒè¯ ...

  var link = currentDirectory + "v?d=" + encodedParams;

  // ç«‹å³æ˜¾ç¤º
  kd.href = link;
  showToast("é“¾æ¥ç”ŸæˆæˆåŠŸï¼", "success");
}
```

**æå‡**ï¼š

- âš¡ ä» 1-3 ç§’ â†’ **0ms**
- âš¡ ä» async â†’ **åŒæ­¥**
- âš¡ æ— éœ€ try-catch
- âš¡ æ— å¤±è´¥é£é™©

## ğŸ”„ å…¼å®¹æ€§å¤„ç†

### å‘åå…¼å®¹æ—§é“¾æ¥

è™½ç„¶æ–°é“¾æ¥ä½¿ç”¨ `/v`ï¼Œä½†ä¿ç•™ `/camera` ä»¥æ”¯æŒæ—§é“¾æ¥ï¼š

**æ–‡ä»¶ç»“æ„**ï¼š

- `v.html` - æ–°çš„æ‹ç…§é¡µé¢
- `camera.html` - ä¿ç•™ç”¨äºå…¼å®¹

**é‡å®šå‘é…ç½®**ï¼ˆ\_redirectsï¼‰ï¼š

```
/v  /v.html  200
```

## ğŸ“ æœ€ä½³å®è·µ

### âœ… DO

1. **ä½¿ç”¨ä¼˜åŒ–çš„ç¼–ç **

   ```javascript
   btoa(unescape(encodeURIComponent(params)));
   ```

2. **å³æ—¶ç”Ÿæˆé“¾æ¥**

   - ä¸ç­‰å¾…å¤–éƒ¨ API
   - åŒæ­¥å‡½æ•°ï¼Œä¸ç”¨ async

3. **ä½¿ç”¨å•å­—ç¬¦å‚æ•°å**

   - `?d=` è€Œé `?data=`

4. **æ–‡ä»¶åä¼ªè£…**
   - `/v` è€Œé `/camera`

### âŒ DON'T

1. **ä¸è¦ä½¿ç”¨æ˜æ–‡å‚æ•°**

   ```javascript
   // âŒ é”™è¯¯
   ?id=133&url=https://baidu.com

   // âœ… æ­£ç¡®
   ?d=MTMzfGh0dHBzOi8vYmFpZHUuY29t
   ```

2. **ä¸è¦åŒé‡ç¼–ç **

   ```javascript
   // âŒ é”™è¯¯ï¼šURL è¿‡é•¿
   btoa(encodeURIComponent(params));

   // âœ… æ­£ç¡®ï¼šä¼˜åŒ–åçš„ç¼–ç 
   btoa(unescape(encodeURIComponent(params)));
   ```

3. **ä¸è¦ä¾èµ–ç¬¬ä¸‰æ–¹æœåŠ¡**
   - çŸ­é“¾æ¥ API å¯èƒ½å¤±è´¥
   - å¢åŠ å»¶è¿Ÿ
   - é™ä½å¯é æ€§

## ğŸ¯ æ€»ç»“

### å½“å‰æ–¹æ¡ˆçš„ä¼˜åŠ¿

| ä¼˜åŠ¿          | è¯´æ˜                  |
| ------------- | --------------------- |
| âš¡ **é€Ÿåº¦å¿«** | å³æ—¶ç”Ÿæˆï¼Œ0 å»¶è¿Ÿ      |
| ğŸ›¡ï¸ **å¯é æ€§** | 100% æˆåŠŸç‡           |
| ğŸ” **å®‰å…¨æ€§** | Base64 åŠ å¯†           |
| ğŸ¨ **éšè”½æ€§** | æ–‡ä»¶åä¼ªè£… + å‚æ•°åŠ å¯† |
| ğŸ“¦ **è½»é‡çº§** | æ— å¤–éƒ¨ä¾èµ–            |

### é€‚ç”¨åœºæ™¯

âœ… **æ¨èä½¿ç”¨åŸå§‹é“¾æ¥**ï¼š

- è¿½æ±‚é€Ÿåº¦å’Œå¯é æ€§
- ä¸æƒ³ä¾èµ–ç¬¬ä¸‰æ–¹æœåŠ¡
- URL é•¿åº¦å¯æ¥å—ï¼ˆ~60 å­—ç¬¦ï¼‰

âŒ **å¦‚éœ€æ›´çŸ­é“¾æ¥**ï¼š

- å¯ä»¥è‡ªå»ºçŸ­é“¾æ¥æœåŠ¡
- ä½¿ç”¨æœåŠ¡å™¨ç«¯å­˜å‚¨å‚æ•°
- éœ€è¦æ•°æ®åº“æ”¯æŒ

## ğŸ”— ç›¸å…³æ–‡ä»¶

- [home.html](mdc:home.html) - é“¾æ¥ç”Ÿæˆé€»è¾‘
- [url-encoding.mdc](mdc:.cursor/rules/url-encoding.mdc) - URL ç¼–ç è§„èŒƒ
- [performance-security.mdc](mdc:.cursor/rules/performance-security.mdc) - æ€§èƒ½
  ä¼˜åŒ–
