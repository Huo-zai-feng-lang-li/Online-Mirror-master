---
description: Cloudflare éƒ¨ç½²æµç¨‹å’Œå‘½ä»¤
---

# Cloudflare éƒ¨ç½²è§„åˆ™

## ğŸš€ éƒ¨ç½²å‘½ä»¤

### éƒ¨ç½²åˆ° Production (è‡ªå®šä¹‰åŸŸå)

```bash
npx wrangler pages deploy . --project-name=online-mirror --branch=production --commit-dirty=true
```

æˆ–ä½¿ç”¨å¿«æ·è„šæœ¬ï¼š

- Windows: `scripts/deploy-production.bat`
- Linux/Mac: `scripts/deploy-production.sh`

### éƒ¨ç½²åˆ° Preview (æµ‹è¯•ç¯å¢ƒ)

```bash
npx wrangler pages deploy . --project-name=online-mirror --branch=main --commit-dirty=true
```

### éƒ¨ç½² Worker API

```bash
wrangler deploy
```

## ğŸ“‹ éƒ¨ç½²å‰æ£€æŸ¥æ¸…å•

1. âœ… æ£€æŸ¥ [config.js](mdc:config.js) ä¸­çš„ API_BASE_URL æ˜¯å¦æ­£ç¡®
2. âœ… ç¡®è®¤ R2 å­˜å‚¨æ¡¶ `photos` å·²åˆ›å»º
3. âœ… æµ‹è¯•æ‰€æœ‰é¡µé¢åŠŸèƒ½æ­£å¸¸
4. âœ… æ£€æŸ¥æ˜¯å¦æœ‰ console.error æˆ–è°ƒè¯•ä»£ç 
5. âœ… ç¡®è®¤ä½¿ç”¨æ­£ç¡®çš„åˆ†æ”¯ï¼ˆproduction æˆ– mainï¼‰

## ğŸ”‘ é‡è¦æ¦‚å¿µ

### åˆ†æ”¯è¯´æ˜

- **production**: ç»‘å®šè‡ªå®šä¹‰åŸŸåï¼Œç”¨äºæ­£å¼ç¯å¢ƒ
- **main**: ç”¨äºé¢„è§ˆå’Œæµ‹è¯•ï¼ŒURL æ ¼å¼ä¸º `main.project.pages.dev`

### ç¯å¢ƒå˜é‡

- Worker é€šè¿‡ [wrangler.toml](mdc:wrangler.toml) é…ç½® R2 ç»‘å®š
- Pages é€šè¿‡ [config.js](mdc:config.js) è·å– Worker API åœ°å€

## âš ï¸ å¸¸è§é”™è¯¯

### è‡ªå®šä¹‰åŸŸåæŒ‡å‘æ—§ç‰ˆæœ¬

**åŸå› **: éƒ¨ç½²åˆ°äº† main åˆ†æ”¯è€Œä¸æ˜¯ production åˆ†æ”¯  
**è§£å†³**: ä½¿ç”¨ `--branch=production` é‡æ–°éƒ¨ç½²

### API è¯·æ±‚å¤±è´¥

**åŸå› **: [config.js](mdc:config.js) æœªæ­£ç¡®åŠ è½½æˆ– Worker API åœ°å€é”™è¯¯  
**è§£å†³**: æ£€æŸ¥ HTML æ–‡ä»¶æ˜¯å¦å¼•å…¥äº† `<script src="config.js"></script>`

### ç¼“å­˜é—®é¢˜

**åŸå› **: CDN ç¼“å­˜æœªæ›´æ–°  
**è§£å†³**: ç­‰å¾… 1-5 åˆ†é’Ÿæˆ–å¼ºåˆ¶åˆ·æ–°ï¼ˆCtrl+Shift+Rï¼‰
