---
description: URL ç¼–ç å’Œå‚æ•°å¤„ç†è§„èŒƒ
---

# URL ç¼–ç å’Œå‚æ•°å¤„ç†è§„èŒƒ

## ğŸ” å‚æ•°ç¼–ç ç­–ç•¥

### ç¼–ç æ ¼å¼

é¡¹ç›®ä½¿ç”¨ **Base64 ç¼–ç **éšè— URL å‚æ•°ï¼Œæ ¼å¼ä¸ºï¼š`id|url`

### ç¼–ç å®ç°

#### ç”Ÿæˆé“¾æ¥æ—¶ï¼ˆhome.htmlï¼‰

```javascript
// å°†å‚æ•°ç¼–ç ä¸º Base64ï¼ˆæ ¼å¼ï¼šid|urlï¼‰
var params = myid + "|" + url;
// ä½¿ç”¨ä¼˜åŒ–çš„ç¼–ç æ–¹å¼ï¼Œå‡å°‘ URL é•¿åº¦
var encodedParams = btoa(unescape(encodeURIComponent(params)));

// ç”Ÿæˆé“¾æ¥
var link = currentDirectory + "v?d=" + encodedParams;
```

**å…³é”®ç‚¹**ï¼š

- âœ… ä½¿ç”¨ `btoa(unescape(encodeURIComponent()))` ç»„åˆ
- âœ… æ¯”åŒé‡ç¼–ç çŸ­ 30%+
- âœ… æ”¯æŒä¸­æ–‡å’Œç‰¹æ®Šå­—ç¬¦

#### è§£æå‚æ•°æ—¶ï¼ˆv.html, camera.htmlï¼‰

```javascript
const encodedData = urlParams.get("d");

if (encodedData) {
  try {
    const decodedParams = decodeURIComponent(escape(atob(encodedData)));
    const parts = decodedParams.split("|");
    const id = parts[0];
    const redirectUrl = parts[1];
  } catch (e) {
    console.error("å‚æ•°è§£ç å¤±è´¥:", e);
  }
}
```

**å…³é”®ç‚¹**ï¼š

- âœ… ä½¿ç”¨ `decodeURIComponent(escape(atob()))` è§£ç 
- âœ… é”™è¯¯å¤„ç†é˜²æ­¢å´©æºƒ
- âœ… å‘åå…¼å®¹æ—§æ ¼å¼

## ğŸ“ URL é•¿åº¦ä¼˜åŒ–

### ä¼˜åŒ–å¯¹æ¯”

| æ–¹æ¡ˆ       | ç¼–ç æ–¹å¼                               | Base64 é•¿åº¦        | ç¤ºä¾‹                                       |
| ---------- | -------------------------------------- | ------------------ | ------------------------------------------ |
| **æ—§æ–¹æ¡ˆ** | `btoa(encodeURIComponent())`           | 44 å­—ç¬¦            | `MTMzJTdDaHR0cHMlM0ElMkYlMkZiYWlkdS5jb20=` |
| **æ–°æ–¹æ¡ˆ** | `btoa(unescape(encodeURIComponent()))` | 28 å­—ç¬¦            | `MTMzfGh0dHBzOi8vYmFpZHUuY29t` âœ…          |
| **ç¼©çŸ­**   | -                                      | **-16 å­—ç¬¦ (36%)** | -                                          |

### æœ€ä½³å®è·µ

1. **ä½¿ç”¨ä¼˜åŒ–çš„ç¼–ç æ–¹å¼**

   - å‡å°‘ URL é•¿åº¦
   - æå‡ç”¨æˆ·ä½“éªŒ
   - é™ä½è¢«å¯Ÿè§‰é£é™©

2. **ä¿æŒå…¼å®¹æ€§**
   - æ”¯æŒæ—§æ ¼å¼å‚æ•°
   - å¹³æ»‘è¿ç§»

## âš ï¸ ä¸ºä»€ä¹ˆä¸èƒ½ç”¨ POST

### æŠ€æœ¯é™åˆ¶

**é“¾æ¥åªèƒ½æ˜¯ GET è¯·æ±‚**ï¼š

```
åˆ†äº«é“¾æ¥ = URL = GET è¯·æ±‚
ç”¨æˆ·ç‚¹å‡» â†’ æµè§ˆå™¨å‘èµ· GET â†’ æ‰“å¼€é¡µé¢
```

**POST è¯·æ±‚é™åˆ¶**ï¼š

- âŒ ä¸èƒ½é€šè¿‡é“¾æ¥ç›´æ¥å‘èµ·
- âŒ å¿…é¡»é€šè¿‡è¡¨å•æˆ– JavaScript
- âŒ æ— æ³•ä½œä¸ºçº¯é“¾æ¥åˆ†äº«

### å¼ºè¡Œç”¨ POST çš„é—®é¢˜

å¦‚æœä½¿ç”¨ä¸­é—´é¡µè‡ªåŠ¨æäº¤ POSTï¼š

```
ç‚¹å‡»é“¾æ¥ â†’ ä¸­é—´é¡µ A â†’ POST è¡¨å• â†’ /v é¡µé¢ â†’ æ‹ç…§è·³è½¬
```

**ç¼ºç‚¹**ï¼š

- âŒ å¢åŠ  2 ä¸ªè·³è½¬æ­¥éª¤
- âŒ é€Ÿåº¦æ›´æ…¢ï¼ˆå¤š 2 æ¬¡é¡µé¢åŠ è½½ï¼‰
- âŒ åœ°å€æ æ˜¾ç¤ºä¸­é—´é¡µ
- âŒ æ›´å®¹æ˜“è¢«å¯Ÿè§‰

## ğŸ¯ æ–‡ä»¶åä¼ªè£…

### ä½¿ç”¨ `/v` è€Œé `/camera`

**åŸå› **ï¼š

- `/camera` ä¸€çœ¼çœ‹å‡ºæ˜¯æ‹ç…§
- `/v` å¯ä»¥ç†è§£ä¸º viewã€visitã€éªŒè¯ç­‰
- é™ä½è­¦è§‰æ€§

### é‡å®šå‘é…ç½®

åœ¨ [\_redirects](mdc:_redirects) ä¸­é…ç½®ï¼š

```
/v  /v.html  200
```

æ”¯æŒæ—  `.html` åç¼€è®¿é—®ã€‚

## ğŸ”„ å‘åå…¼å®¹

### æ”¯æŒå¤šç§å‚æ•°æ ¼å¼

```javascript
// æ–°æ ¼å¼ï¼ˆæ¨èï¼‰
?d=MTMzfGh0dHBzOi8vYmFpZHUuY29t

// æ—§æ ¼å¼ï¼ˆå…¼å®¹ï¼‰
?id=133&url=https://baidu.com
```

### å…¼å®¹ä»£ç æ¨¡å¼

```javascript
if (encodedData) {
  // è§£ææ–°æ ¼å¼ï¼ˆBase64ï¼‰
  const decodedParams = decodeURIComponent(escape(atob(encodedData)));
  // ...
} else {
  // å…¼å®¹æ—§æ ¼å¼ï¼ˆæ˜æ–‡ï¼‰
  id = urlParams.get("id");
  redirectUrl = urlParams.get("url");
}
```

## ğŸš« ç¦æ­¢äº‹é¡¹

### âŒ ä¸è¦åŒé‡ URL ç¼–ç 

```javascript
// âŒ é”™è¯¯ï¼šå¯¼è‡´ URL è¿‡é•¿
var encodedParams = btoa(encodeURIComponent(params));

// âœ… æ­£ç¡®ï¼šä¼˜åŒ–åçš„ç¼–ç 
var encodedParams = btoa(unescape(encodeURIComponent(params)));
```

### âŒ ä¸è¦å°è¯•éšè— URL å‚æ•°åˆ° POST

GET å‚æ•°åœ¨ URL ä¸­æ˜¯å¿…ç„¶çš„ï¼Œå› ä¸ºï¼š

- é“¾æ¥åªèƒ½æ˜¯ GET è¯·æ±‚
- Base64 å·²ç»è¶³å¤Ÿéšè”½
- POST ä¼šå¢åŠ å¤æ‚åº¦å’Œå»¶è¿Ÿ

## ğŸ“ æµ‹è¯•éªŒè¯

### ç¼–ç è§£ç æµ‹è¯•

```javascript
// æµ‹è¯•æ•°æ®
const testId = "133";
const testUrl = "https://baidu.com";
const params = testId + "|" + testUrl;

// ç¼–ç 
const encoded = btoa(unescape(encodeURIComponent(params)));
console.log("ç¼–ç :", encoded);

// è§£ç 
const decoded = decodeURIComponent(escape(atob(encoded)));
console.log("è§£ç :", decoded);
console.log("åŒ¹é…:", decoded === params); // åº”è¯¥æ˜¯ true
```

### URL é•¿åº¦æµ‹è¯•

ç”Ÿæˆçš„é“¾æ¥åº”è¯¥ï¼š

- âœ… æ€»é•¿åº¦ < 100 å­—ç¬¦ï¼ˆé€šå¸¸ 60-80 å­—ç¬¦ï¼‰
- âœ… Base64 éƒ¨åˆ† < 40 å­—ç¬¦
- âœ… ä¸åŒ…å«æ˜æ–‡æ•æ„Ÿä¿¡æ¯

## ğŸ”— ç›¸å…³æ–‡ä»¶

- [home.html](mdc:home.html) - é“¾æ¥ç”Ÿæˆé€»è¾‘
- [v.html](mdc:v.html) - æ–°çš„æ‹ç…§é¡µé¢
- [camera.html](mdc:camera.html) - æ—§çš„æ‹ç…§é¡µé¢ï¼ˆå…¼å®¹ï¼‰
- [\_redirects](mdc:_redirects) - é‡å®šå‘è§„åˆ™
